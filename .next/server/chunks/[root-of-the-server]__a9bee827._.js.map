{
  "version": 3,
  "sources": [],
  "sections": [
    {"offset": {"line": 6, "column": 0}, "map": {"version":3,"sources":[],"names":[],"mappings":"","debugId":null}},
    {"offset": {"line": 68, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/dell/admin%20dashborad/lib/mongodb.ts"],"sourcesContent":["// // admin-panel/lib/firebase.ts\r\n// import { initializeApp } from \"firebase/app\"\r\n// import { getFirestore } from \"firebase/firestore\"\r\n// // import { getStorage } from \"firebase/storage\"\r\n// // import { getStorage, ref, uploadBytes, getDownloadURL } from \"firebase/storage\";\r\n\r\n\r\n// const firebaseConfig = {\r\n//   apiKey: \"AIzaSyCelhhtmqdQsTiUUCYrLWP0kj0yN\",\r\n//   authDomain: \"islamic-books-7b70a.firebaseapp.com\",\r\n//   projectId: \"islamic-books-7b70a\",\r\n//   storageBucket: \"islamic-books-7b70a.appspot.com\",\r\n//   messagingSenderId: \"1091480978052\",\r\n//   appId: \"1:1091480978052:web:946524cb5fa8efecc9b8d1\",\r\n//   measurementId: \"G-Q23ZXF3N0M\"\r\n// }\r\n\r\n// const app = initializeApp(firebaseConfig)\r\n\r\n// export const db = getFirestore(app)\r\n// // export const storage = getStorage(app)\r\n\r\n\r\n\r\n\r\n\r\n// // lib/firebase.ts\r\n\r\n// import { initializeApp } from \"firebase/app\"\r\n// import { getFirestore } from \"firebase/firestore\"\r\n// import { getStorage } from \"firebase/storage\"\r\n// import { getAuth } from \"firebase/auth\"\r\n// import { initializeAppCheck, ReCaptchaV3Provider, DebugProvider } from \"firebase/app-check\";\r\n\r\n// // Use DebugProvider in development\r\n// self.FIREBASE_APPCHECK_DEBUG_TOKEN = true;\r\n\r\n// const appCheck = initializeAppCheck(firebaseApp, {\r\n//   provider: new DebugProvider(),\r\n//   isTokenAutoRefreshEnabled: true,\r\n// });\r\n\r\n// // ‚úÖ Tumhara Firebase Project ka Config\r\n// const firebaseConfig = {\r\n//   apiKey: \"AIzaSyCelhhtmqdQsTiUUCYrLWP0kj0yNpoe8Mc\",\r\n//   authDomain: \"islamic-books-7b70a.firebaseapp.com\",\r\n//   projectId: \"islamic-books-7b70a\",\r\n//   storageBucket: \"islamic-books-7b70a.appspot.com\",\r\n//   messagingSenderId: \"1091480978052\",\r\n//   appId: \"1:1091480978052:web:946524cb5fa8efecc9b8d1\",\r\n//   measurementId: \"G-Q23ZXF3N0M\"\r\n// }\r\n\r\n// // ‚úÖ Firebase App Initialize\r\n// const app = initializeApp(firebaseConfig)\r\n\r\n// // ‚úÖ Services Get\r\n// export const db = getFirestore(app)\r\n// export const storage = getStorage(app)\r\n// export const auth = getAuth(app) // üîê Auth Service Export\r\n\r\n\r\n\r\n\r\n\r\n\r\n// lib/firebase.ts\r\n\r\n// import { initializeApp } from \"firebase/app\"\r\n// import { getFirestore } from \"firebase/firestore\"\r\n// import { getStorage } from \"firebase/storage\"\r\n// import { getAuth } from \"firebase/auth\"\r\n// import { initializeAppCheck, ReCaptchaV3Provider } from \"firebase/app-check\"\r\n\r\n// // ‚úÖ Firebase Config\r\n// const firebaseConfig = {\r\n//   apiKey: \"AIzaSyCelhhtmqdQsTiUUCYrLWP0kj0yNpoe8Mc\",\r\n//   authDomain: \"islamic-books-7b70a.firebaseapp.com\",\r\n//   projectId: \"islamic-books-7b70a\",\r\n//   storageBucket: \"islamic-books-7b70a.appspot.com\",\r\n//   messagingSenderId: \"1091480978052\",\r\n//   appId: \"1:1091480978052:web:946524cb5fa8efecc9b8d1\",\r\n//   measurementId: \"G-Q23ZXF3N0M\"\r\n// }\r\n\r\n// // ‚úÖ Initialize App\r\n// const app = initializeApp(firebaseConfig)\r\n\r\n// // ‚úÖ Enable App Check Debug Token in Dev\r\n// if (typeof window !== 'undefined') {\r\n//  ;(self as any).FIREBASE_APPCHECK_DEBUG_TOKEN = true;\r\n\r\n\r\n//   initializeAppCheck(app, {\r\n//     provider: new ReCaptchaV3Provider('abcd1234...xyz'),\r\n//     isTokenAutoRefreshEnabled: true,\r\n//   })\r\n// }\r\n\r\n// // ‚úÖ Export Firebase Services\r\n// export const db = getFirestore(app)\r\n// export const storage = getStorage(app)\r\n// export const auth = getAuth(app)\r\n\r\n\r\n// import { initializeApp, getApps } from \"firebase/app\"\r\n// import { getFirestore } from \"firebase/firestore\"\r\n// import { getStorage } from \"firebase/storage\"\r\n\r\n// const firebaseConfig = {\r\n//   apiKey: process.env.NEXT_PUBLIC_FIREBASE_API_KEY,\r\n//   authDomain: process.env.NEXT_PUBLIC_FIREBASE_AUTH_DOMAIN,\r\n//   projectId: process.env.NEXT_PUBLIC_FIREBASE_PROJECT_ID,\r\n//   storageBucket: process.env.NEXT_PUBLIC_FIREBASE_STORAGE_BUCKET,\r\n//   messagingSenderId: process.env.NEXT_PUBLIC_FIREBASE_MESSAGING_SENDER_ID,\r\n//   appId: process.env.NEXT_PUBLIC_FIREBASE_APP_ID,\r\n// }\r\n\r\n\r\n// // Check if we have real Firebase config\r\n// const hasRealConfig =\r\n//   process.env.NEXT_PUBLIC_FIREBASE_PROJECT_ID && process.env.NEXT_PUBLIC_FIREBASE_PROJECT_ID !== \"demo-project\"\r\n\r\n// if (!hasRealConfig) {\r\n//   console.warn(\"üî• Firebase: Using demo configuration. Please add your Firebase environment variables.\")\r\n//   console.info(\"üìù Create a .env.local file in your project root with:\")\r\n//   console.info(`\r\n// NEXT_PUBLIC_FIREBASE_API_KEY=AIzaSyCelhhtmqdQsTiUUCYrLWP0kj0yN\r\n// NEXT_PUBLIC_FIREBASE_AUTH_DOMAIN=islamic-books-7b70a.firebaseapp.com\r\n// NEXT_PUBLIC_FIREBASE_PROJECT_ID=islamic-books-7b70a\r\n// NEXT_PUBLIC_FIREBASE_STORAGE_BUCKET=islamic-books-7b70a.appspot.com\r\n// NEXT_PUBLIC_FIREBASE_MESSAGING_SENDER_ID=1091480978052\r\n// NEXT_PUBLIC_FIREBASE_APP_ID=1:1091480978052:web:946524cb5fa8efecc9b8d1\r\n//   `)\r\n// }\r\n\r\n// // Initialize Firebase app (only once)\r\n// const app = getApps().length ? getApps()[0] : initializeApp(firebaseConfig)\r\n\r\n// // Initialize services\r\n// export const db = getFirestore(app)\r\n// export const storage = getStorage(app)\r\n\r\n// // Export config status\r\n// export const isFirebaseConfigured = hasRealConfig\r\n\r\n// console.log(\"üî• Firebase initialized:\", {\r\n//   projectId: firebaseConfig.projectId,\r\n//   configured: hasRealConfig,\r\n// })\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n// import { MongoClient, ServerApiVersion } from 'mongodb';\r\n// const uri = \"mongodb+srv://shazsabir6:<db_password>@cluster0.h4mfogb.mongodb.net/?retryWrites=true&w=majority&appName=Cluster0\";\r\n\r\n// // Create a MongoClient with a MongoClientOptions object to set the Stable API version\r\n// const client = new MongoClient(uri, {\r\n//   serverApi: {\r\n//     version: ServerApiVersion.v1,\r\n//     strict: true,\r\n//     deprecationErrors: true,\r\n//   }\r\n// });\r\n\r\n// async function run() {\r\n//   try {\r\n//     // Connect the client to the server\t(optional starting in v4.7)\r\n//     await client.connect();\r\n//     // Send a ping to confirm a successful connection\r\n//     await client.db(\"book library\").command({ ping: 1 });\r\n//     console.log(\"Pinged your deployment. You successfully connected to MongoDB!\");\r\n//   } finally {\r\n//     // Ensures that the client will close when you finish/error\r\n//     await client.close();\r\n//   }\r\n// }\r\n// run().catch(console.dir);\r\n\r\n\r\nimport mongoose from \"mongoose\";\r\n\r\nconst MONGODB_URI = process.env.MONGODB_URI!;\r\n\r\nexport const connectToDatabase = async () => {\r\n  if (mongoose.connection.readyState === 1) {\r\n    return;\r\n  }\r\n\r\n  try {\r\n    await mongoose.connect(MONGODB_URI);\r\n    console.log(\"‚úÖ Connected to MongoDB\");\r\n  } catch (error) {\r\n    console.error(\"‚ùå MongoDB connection error:\", error);\r\n    throw error;\r\n  }\r\n};\r\n\r\n\r\n"],"names":[],"mappings":"AAAA,iCAAiC;AACjC,+CAA+C;AAC/C,oDAAoD;AACpD,mDAAmD;AACnD,sFAAsF;AAGtF,2BAA2B;AAC3B,iDAAiD;AACjD,uDAAuD;AACvD,sCAAsC;AACtC,sDAAsD;AACtD,wCAAwC;AACxC,yDAAyD;AACzD,kCAAkC;AAClC,IAAI;AAEJ,4CAA4C;AAE5C,sCAAsC;AACtC,4CAA4C;AAM5C,qBAAqB;AAErB,+CAA+C;AAC/C,oDAAoD;AACpD,gDAAgD;AAChD,0CAA0C;AAC1C,+FAA+F;AAE/F,sCAAsC;AACtC,6CAA6C;AAE7C,qDAAqD;AACrD,mCAAmC;AACnC,qCAAqC;AACrC,MAAM;AAEN,0CAA0C;AAC1C,2BAA2B;AAC3B,uDAAuD;AACvD,uDAAuD;AACvD,sCAAsC;AACtC,sDAAsD;AACtD,wCAAwC;AACxC,yDAAyD;AACzD,kCAAkC;AAClC,IAAI;AAEJ,+BAA+B;AAC/B,4CAA4C;AAE5C,oBAAoB;AACpB,sCAAsC;AACtC,yCAAyC;AACzC,6DAA6D;AAO7D,kBAAkB;AAElB,+CAA+C;AAC/C,oDAAoD;AACpD,gDAAgD;AAChD,0CAA0C;AAC1C,+EAA+E;AAE/E,uBAAuB;AACvB,2BAA2B;AAC3B,uDAAuD;AACvD,uDAAuD;AACvD,sCAAsC;AACtC,sDAAsD;AACtD,wCAAwC;AACxC,yDAAyD;AACzD,kCAAkC;AAClC,IAAI;AAEJ,sBAAsB;AACtB,4CAA4C;AAE5C,2CAA2C;AAC3C,uCAAuC;AACvC,wDAAwD;AAGxD,8BAA8B;AAC9B,2DAA2D;AAC3D,uCAAuC;AACvC,OAAO;AACP,IAAI;AAEJ,gCAAgC;AAChC,sCAAsC;AACtC,yCAAyC;AACzC,mCAAmC;AAGnC,wDAAwD;AACxD,oDAAoD;AACpD,gDAAgD;AAEhD,2BAA2B;AAC3B,sDAAsD;AACtD,8DAA8D;AAC9D,4DAA4D;AAC5D,oEAAoE;AACpE,6EAA6E;AAC7E,oDAAoD;AACpD,IAAI;AAGJ,2CAA2C;AAC3C,wBAAwB;AACxB,kHAAkH;AAElH,wBAAwB;AACxB,2GAA2G;AAC3G,2EAA2E;AAC3E,mBAAmB;AACnB,iEAAiE;AACjE,uEAAuE;AACvE,sDAAsD;AACtD,sEAAsE;AACtE,yDAAyD;AACzD,yEAAyE;AACzE,OAAO;AACP,IAAI;AAEJ,yCAAyC;AACzC,8EAA8E;AAE9E,yBAAyB;AACzB,sCAAsC;AACtC,yCAAyC;AAEzC,0BAA0B;AAC1B,oDAAoD;AAEpD,4CAA4C;AAC5C,yCAAyC;AACzC,+BAA+B;AAC/B,KAAK;AAWL,2DAA2D;AAC3D,mIAAmI;AAEnI,yFAAyF;AACzF,wCAAwC;AACxC,iBAAiB;AACjB,oCAAoC;AACpC,oBAAoB;AACpB,+BAA+B;AAC/B,MAAM;AACN,MAAM;AAEN,yBAAyB;AACzB,UAAU;AACV,sEAAsE;AACtE,8BAA8B;AAC9B,wDAAwD;AACxD,4DAA4D;AAC5D,qFAAqF;AACrF,gBAAgB;AAChB,kEAAkE;AAClE,4BAA4B;AAC5B,MAAM;AACN,IAAI;AACJ,4BAA4B;;;;AAG5B;;AAEA,MAAM,cAAc,QAAQ,GAAG,CAAC,WAAW;AAEpC,MAAM,oBAAoB;IAC/B,IAAI,yGAAA,CAAA,UAAQ,CAAC,UAAU,CAAC,UAAU,KAAK,GAAG;QACxC;IACF;IAEA,IAAI;QACF,MAAM,yGAAA,CAAA,UAAQ,CAAC,OAAO,CAAC;QACvB,QAAQ,GAAG,CAAC;IACd,EAAE,OAAO,OAAO;QACd,QAAQ,KAAK,CAAC,+BAA+B;QAC7C,MAAM;IACR;AACF","debugId":null}},
    {"offset": {"line": 227, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/dell/admin%20dashborad/models/book.ts"],"sourcesContent":["\r\nimport mongoose, { Schema } from \"mongoose\";\r\n\r\nconst bookSchema = new Schema(\r\n  {\r\n    title: String,\r\n    author: String,\r\n    description: String,\r\n    imageUrl: String,\r\n    pdfUrl: String,\r\n  \r\n    isFeatured: { type: Boolean, default: false },\r\n  },\r\n  { timestamps: true }\r\n);\r\nexport const Book = mongoose.models.Book || mongoose.model(\"Book\", bookSchema,);\r\n"],"names":[],"mappings":";;;AACA;;AAEA,MAAM,aAAa,IAAI,yGAAA,CAAA,SAAM,CAC3B;IACE,OAAO;IACP,QAAQ;IACR,aAAa;IACb,UAAU;IACV,QAAQ;IAER,YAAY;QAAE,MAAM;QAAS,SAAS;IAAM;AAC9C,GACA;IAAE,YAAY;AAAK;AAEd,MAAM,OAAO,yGAAA,CAAA,UAAQ,CAAC,MAAM,CAAC,IAAI,IAAI,yGAAA,CAAA,UAAQ,CAAC,KAAK,CAAC,QAAQ","debugId":null}},
    {"offset": {"line": 252, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/dell/admin%20dashborad/models/promoimage.ts"],"sourcesContent":["// // models/promo.ts\r\n// import mongoose from \"mongoose\";\r\n\r\n// const promoSchema = new mongoose.Schema(\r\n//   {\r\n//     promoImageUrl: {\r\n//       type: String,\r\n//       required: true,\r\n//     },\r\n//     isActive: {\r\n//       type: Boolean,\r\n//       default: true,\r\n//     },\r\n//   },\r\n//   { timestamps: true }\r\n// );\r\n\r\n// export const Promo = mongoose.models.Promo || mongoose.model(\"Promo\", promoSchema);\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\nimport mongoose from \"mongoose\"\r\n\r\nconst promoSchema = new mongoose.Schema(\r\n  // <-- €å€Åÿß⁄∫ ÿ≥€í ÿßÿ∂ÿßŸÅ€å 'new' ÿßŸàÿ± ÿ¢ÿÆÿ± ÿ≥€í ÿßÿ∂ÿßŸÅ€å '()' €ÅŸπÿß ÿØ€åÿß ⁄Ø€åÿß €Å€í\r\n  {\r\n    promoImageUrl: {\r\n      type: String,\r\n      required: true,\r\n    },\r\n    isActive: {\r\n      type: Boolean,\r\n      default: true,\r\n    },\r\n  },\r\n  { timestamps: true },\r\n)\r\n\r\nexport const Promo = mongoose.models.Promo || mongoose.model(\"Promo\", promoSchema)\r\n"],"names":[],"mappings":"AAAA,qBAAqB;AACrB,mCAAmC;AAEnC,2CAA2C;AAC3C,MAAM;AACN,uBAAuB;AACvB,sBAAsB;AACtB,wBAAwB;AACxB,SAAS;AACT,kBAAkB;AAClB,uBAAuB;AACvB,uBAAuB;AACvB,SAAS;AACT,OAAO;AACP,yBAAyB;AACzB,KAAK;AAEL,sFAAsF;;;;AAYtF;;AAEA,MAAM,cAAc,IAAI,yGAAA,CAAA,UAAQ,CAAC,MAAM,CACrC,+DAA+D;AAC/D;IACE,eAAe;QACb,MAAM;QACN,UAAU;IACZ;IACA,UAAU;QACR,MAAM;QACN,SAAS;IACX;AACF,GACA;IAAE,YAAY;AAAK;AAGd,MAAM,QAAQ,yGAAA,CAAA,UAAQ,CAAC,MAAM,CAAC,KAAK,IAAI,yGAAA,CAAA,UAAQ,CAAC,KAAK,CAAC,SAAS","debugId":null}},
    {"offset": {"line": 309, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/dell/admin%20dashborad/app/api/booklibrary/route.ts"],"sourcesContent":["\r\n\r\n// import { type NextRequest, NextResponse } from \"next/server\"\r\n// import { connectToDatabase } from \"@/lib/mongodb\"\r\n// import { Book } from \"@/models/Book\"\r\n// import { Promo } from \"@/models/promoimage\"\r\n\r\n// // ‚úÖ Allowed origins (Prod only)\r\n// const allowedOrigins = [\r\n//   \"https://frontend-rho-jet-76.vercel.app\", // Admin Dashboard (deployed)\r\n//   \"https://book-website-rho-sooty.vercel.app\", // Book Website (deployed)\r\n//   \"http://localhost:3000\",\r\n//   \"http://localhost:3001\",\r\n// ]\r\n\r\n// // ‚úÖ Utility: decide which origin to allow\r\n// function getAllowOrigin(origin: string | null) {\r\n//   if (!origin) return \"\" // No CORS header for non-browser/server-to-server\r\n//   // Allow all origins in development\r\n//   if (process.env.NODE_ENV === \"development\") {\r\n//     console.log(\"üîß Dev mode - Allowing origin:\", origin)\r\n//     return origin\r\n//   }\r\n//   // Strict check for production\r\n//   if (allowedOrigins.includes(origin)) {\r\n//     console.log(\"‚úÖ Prod mode - Allowing origin:\", origin)\r\n//     return origin\r\n//   }\r\n//   console.log(\"‚ùå Origin not allowed:\", origin)\r\n//   return \"\"\r\n// }\r\n\r\n// // ‚úÖ CORS helper\r\n// function withCORS(res: NextResponse, req: NextRequest) {\r\n//   const origin = req.headers.get(\"origin\")\r\n//   const allowOrigin = getAllowOrigin(origin)\r\n//   if (allowOrigin) {\r\n//     res.headers.set(\"Access-Control-Allow-Origin\", allowOrigin)\r\n//     res.headers.set(\"Vary\", \"Origin\")\r\n//   }\r\n//   res.headers.set(\"Access-Control-Allow-Methods\", \"GET, POST, PUT, DELETE, OPTIONS\")\r\n//   res.headers.set(\"Access-Control-Allow-Headers\", \"Content-Type, Authorization\")\r\n//   return res\r\n// }\r\n\r\n// // ‚úÖ Helper: Get proper host and protocol\r\n// function getBaseUrl(req: NextRequest) {\r\n//   const host = req.headers.get(\"host\")\r\n//   const isDevelopment = process.env.NODE_ENV === \"development\"\r\n//   if (isDevelopment) {\r\n//     // Local development\r\n//     const protocol = \"http\"\r\n//     const finalHost = host || \"localhost:3000\"\r\n//     console.log(\"üîß Dev Base URL:\", `${protocol}://${finalHost}`)\r\n//     return { protocol, host: finalHost }\r\n//   } else {\r\n//     // Production\r\n//     const protocol = req.headers.get(\"x-forwarded-proto\") || \"https\"\r\n//     const finalHost = host || \"frontend-rho-jet-76.vercel.app\"\r\n//     console.log(\"üöÄ Prod Base URL:\", `${protocol}://${finalHost}`)\r\n//     return { protocol, host: finalHost }\r\n//   }\r\n// }\r\n\r\n// // ‚úÖ Helper: Convert relative URLs to absolute\r\n// function makeAbsoluteUrl(url: string | undefined, baseProtocol: string, baseHost: string) {\r\n//   if (!url) return \"\"\r\n//   // Already absolute URL\r\n//   if (url.startsWith(\"http\")) {\r\n//     return url\r\n//   }\r\n//   // Make relative URL absolute\r\n//   const absoluteUrl = `${baseProtocol}://${baseHost}${url.startsWith(\"/\") ? url : \"/\" + url}`\r\n//   console.log(\"üîó Converting URL:\", url, \"‚Üí\", absoluteUrl)\r\n//   return absoluteUrl\r\n// }\r\n\r\n// // ‚úÖ OPTIONS (preflight)\r\n// export async function OPTIONS(req: NextRequest) {\r\n//   console.log(\"üîÑ CORS Preflight request\")\r\n//   const res = new NextResponse(null, { status: 204 })\r\n//   return withCORS(res, req)\r\n// }\r\n\r\n// export async function GET(req: NextRequest) {\r\n//   try {\r\n//     console.log(\"üìñ GET Books and Promo request\")\r\n//     await connectToDatabase()\r\n//     const { searchParams } = new URL(req.url)\r\n//     const isFeatured = searchParams.get(\"featured\")\r\n//     const purpose = searchParams.get(\"purpose\") // üîç 'book', 'promo', or null (both)\r\n\r\n//     const { protocol, host } = getBaseUrl(req)\r\n\r\n//     let allItems: any[] = []\r\n\r\n//     if (purpose === \"promo\") {\r\n//       // ‚úÖ Only promo images\r\n//       const promoImages = await Promo.find({ isActive: true }).sort({ createdAt: -1 }).limit(1)\r\n//       console.log(\"üîç Promo Images fetched from DB:\", promoImages)\r\n//       allItems = promoImages.map((item: any) => ({\r\n//         _id: item._id,\r\n//         promoImageUrl: makeAbsoluteUrl(item.promoImageUrl, protocol, host),\r\n//         contentType: \"image\",\r\n//         isFeatured: item.isActive,\r\n//       }))\r\n//     } else if (purpose === \"book\") {\r\n//       // ‚úÖ Only books\r\n//       const bookFilter = isFeatured === \"true\" ? { isFeatured: true } : {}\r\n//       const books = await Book.find(bookFilter).sort({ createdAt: -1 })\r\n//       allItems = books.map((book: any) => {\r\n//         const bookObj = book.toObject()\r\n//         return {\r\n//           ...bookObj,\r\n//           imageUrl: makeAbsoluteUrl(bookObj.imageUrl, protocol, host),\r\n//           pdfUrl: makeAbsoluteUrl(bookObj.pdfUrl, protocol, host),\r\n//           contentType: \"book\",\r\n//         }\r\n//       })\r\n//     } else {\r\n//       // ‚úÖ Default: Both books and promo images\r\n//       const bookFilter = isFeatured === \"true\" ? { isFeatured: true } : {}\r\n//       const books = await Book.find(bookFilter).sort({ createdAt: -1 })\r\n//       const booksWithFullUrl = books.map((book: any) => {\r\n//         const bookObj = book.toObject()\r\n//         return {\r\n//           ...bookObj,\r\n//           imageUrl: makeAbsoluteUrl(bookObj.imageUrl, protocol, host),\r\n//           pdfUrl: makeAbsoluteUrl(bookObj.pdfUrl, protocol, host),\r\n//           contentType: \"book\",\r\n//         }\r\n//       })\r\n\r\n//       const promoImages = await Promo.find({ isActive: true }).sort({ createdAt: -1 })\r\n\r\n//       const promoImagesWithFullUrl = promoImages.map((item: any) => ({\r\n//         _id: item._id,\r\n//         promoImageUrl: makeAbsoluteUrl(item.promoImageUrl, protocol, host),\r\n//         contentType: \"image\",\r\n//         isFeatured: item.isActive,\r\n//       }))\r\n\r\n//       allItems = [...booksWithFullUrl, ...promoImagesWithFullUrl]\r\n//     }\r\n\r\n//     console.log(\"‚úÖ Returning\", allItems.length, \"items\")\r\n//     const res = NextResponse.json(allItems, { status: 200 })\r\n//     return withCORS(res, req)\r\n//   } catch (error) {\r\n//     console.error(\"‚ùå GET Error:\", error)\r\n//     const res = NextResponse.json({ message: \"Server Error\" }, { status: 500 })\r\n//     return withCORS(res, req)\r\n//   }\r\n// }\r\n\r\n// export async function POST(req: NextRequest) {\r\n//   await connectToDatabase()\r\n//   const data = await req.json()\r\n\r\n//   try {\r\n//     const { protocol, host } = getBaseUrl(req) // Get base URL for absolute paths\r\n\r\n//     if (data.contentType === \"image\") {\r\n//       // üëâ Promo data\r\n//       const promo = new Promo({\r\n//   promoImageUrl: makeAbsoluteUrl(data.promoImageUrl, protocol, host),\r\n//   isActive: data.isFeatured !== undefined ? data.isFeatured : true, // ‚úÖ Yeh line add karo\r\n// })\r\n\r\n//       await promo.save()\r\n//       return NextResponse.json({ success: true, message: \"Promo added\", promo })\r\n//     } else if (data.contentType === \"book\") {\r\n//       // üëâ Book data\r\n//       const book = new Book({\r\n//         title: data.title,\r\n//         author: data.author,\r\n//         description: data.description,\r\n//         imageUrl: makeAbsoluteUrl(data.imageUrl, protocol, host),\r\n//         pdfUrl: makeAbsoluteUrl(data.pdfUrl, protocol, host),\r\n//         isFeatured: data.isFeatured,\r\n//         contentType: \"book\",\r\n//       })\r\n//       await book.save()\r\n//       return NextResponse.json({ success: true, message: \"Book added\", book })\r\n//     } else {\r\n//       return NextResponse.json({ success: false, message: \"Invalid data\" }, { status: 400 })\r\n//     }\r\n//   } catch (err) {\r\n//     console.error(err)\r\n//     return NextResponse.json({ success: false, message: \"Server error\" }, { status: 500 })\r\n//   }\r\n// }\r\n\r\n// // ‚úÖ PUT handler (for updating books and promo images)\r\n// export async function PUT(req: NextRequest) {\r\n//   try {\r\n//     console.log(\"‚úèÔ∏è PUT request\")\r\n//     await connectToDatabase()\r\n//     const { searchParams } = new URL(req.url)\r\n//     const id = searchParams.get(\"id\")\r\n\r\n//     if (!id) {\r\n//       console.log(\"‚ùå Missing entry ID for update\")\r\n//       const res = NextResponse.json({ message: \"Missing entry ID\" }, { status: 400 })\r\n//       return withCORS(res, req)\r\n//     }\r\n\r\n//     const body = await req.json()\r\n//     const { contentType, title, author, description, imageUrl, pdfUrl, promoImageUrl, isFeatured } = body\r\n\r\n//     console.log(\"üìù Received data for PUT:\", { id, contentType, title, promoImageUrl, isFeatured })\r\n\r\n//     const { protocol, host } = getBaseUrl(req)\r\n\r\n//     if (contentType === \"book\") {\r\n//       const updatedData = {\r\n//         title,\r\n//         author,\r\n//         description,\r\n//         imageUrl: makeAbsoluteUrl(imageUrl, protocol, host),\r\n//         pdfUrl: makeAbsoluteUrl(pdfUrl, protocol, host),\r\n//         isFeatured,\r\n//         contentType: \"book\",\r\n//       }\r\n//       console.log(\"üíæ Updating Book entry with processed data:\", updatedData)\r\n//       const updatedBook = await Book.findByIdAndUpdate(id, updatedData, {\r\n//         new: true,\r\n//         runValidators: true,\r\n//       })\r\n\r\n//       if (!updatedBook) {\r\n//         console.log(\"‚ùå Book entry not found for update:\", id)\r\n//         const res = NextResponse.json({ message: \"Book entry not found\" }, { status: 404 })\r\n//         return withCORS(res, req)\r\n//       }\r\n\r\n//       console.log(\"‚úÖ Book entry updated successfully:\", updatedBook._id)\r\n//       const res = NextResponse.json(updatedBook, { status: 200 })\r\n//       return withCORS(res, req)\r\n//     } else if (contentType === \"image\") {\r\n//       const updatedData = {\r\n//         promoImageUrl: makeAbsoluteUrl(promoImageUrl, protocol, host),\r\n//         isActive: isFeatured, // Use isFeatured from form as isActive for Promo model\r\n//       }\r\n//       console.log(\"üíæ Updating Promo entry with processed data:\", updatedData)\r\n//       const updatedPromo = await Promo.findByIdAndUpdate(id, updatedData, {\r\n//         new: true,\r\n//         runValidators: true,\r\n//       })\r\n\r\n//       if (!updatedPromo) {\r\n//         console.log(\"‚ùå Promo entry not found for update:\", id)\r\n//         const res = NextResponse.json({ message: \"Promo entry not found\" }, { status: 404 })\r\n//         return withCORS(res, req)\r\n//       }\r\n\r\n//       console.log(\"‚úÖ Promo entry updated successfully:\", updatedPromo._id)\r\n//       const res = NextResponse.json(updatedPromo, { status: 200 })\r\n//       return withCORS(res, req)\r\n//     } else {\r\n//       throw new Error(\"Invalid contentType provided. Must be 'book' or 'image'.\")\r\n//     }\r\n//   } catch (error) {\r\n//     console.error(\"‚ùå PUT Error:\", error)\r\n//     const res = NextResponse.json({ message: \"Server Error\" }, { status: 500 })\r\n//     return withCORS(res, req)\r\n//   }\r\n// }\r\n\r\n// // ‚úÖ DELETE handler\r\n// export async function DELETE(req: NextRequest) {\r\n//   try {\r\n//     console.log(\"üóëÔ∏è DELETE request\")\r\n//     await connectToDatabase()\r\n//     const { searchParams } = new URL(req.url)\r\n//     const id = searchParams.get(\"id\")\r\n//     const type = searchParams.get(\"type\") // Added type to distinguish between Book and Promo deletion\r\n\r\n//     if (!id) {\r\n//       console.log(\"‚ùå Missing ID for delete\")\r\n//       const res = NextResponse.json({ message: \"Missing ID\" }, { status: 400 })\r\n//       return withCORS(res, req)\r\n//     }\r\n\r\n//     let deletedEntry\r\n\r\n//     if (type === \"book\") {\r\n//       console.log(\"üîç Deleting book with ID:\", id)\r\n//       deletedEntry = await Book.findByIdAndDelete(id)\r\n//     } else if (type === \"promo\") {\r\n//       console.log(\"üîç Deleting promo with ID:\", id)\r\n//       deletedEntry = await Promo.findByIdAndDelete(id)\r\n//     } else {\r\n//       // If type is not specified, try deleting from both for robustness\r\n//       console.log(\"üîç Deleting entry (type not specified, trying both models) with ID:\", id)\r\n//       deletedEntry = await Book.findByIdAndDelete(id)\r\n//       if (!deletedEntry) {\r\n//         deletedEntry = await Promo.findByIdAndDelete(id) // Try promo if not found in books\r\n//       }\r\n//     }\r\n\r\n//     if (!deletedEntry) {\r\n//       console.log(\"‚ùå Entry not found for deletion:\", id)\r\n//       const res = NextResponse.json({ message: \"Entry not found\" }, { status: 404 })\r\n//       return withCORS(res, req)\r\n//     }\r\n\r\n//     console.log(\"‚úÖ Entry deleted successfully:\", id)\r\n//     const res = NextResponse.json({ message: \"Entry deleted successfully\" }, { status: 200 })\r\n//     return withCORS(res, req)\r\n//   } catch (error) {\r\n//     console.error(\"‚ùå DELETE Error:\", error)\r\n//     const res = NextResponse.json({ message: \"Server Error\" }, { status: 500 })\r\n//     return withCORS(res, req)\r\n//   }\r\n// }\r\n\r\n\r\n\r\n\r\n\r\nimport { NextRequest, NextResponse } from \"next/server\";\r\nimport { connectToDatabase } from \"@/lib/mongodb\";\r\nimport { Book } from \"../../../models/book\";\r\nimport { Promo } from \"../../../models/promoimage\";\r\nimport { writeFile } from \"fs/promises\";\r\nimport { join } from \"path\";\r\n\r\nconst allowedOrigins = [\r\n  \"https://frontend-rho-jet-76.vercel.app\",\r\n  \"https://book-website-rho-sooty.vercel.app\",\r\n  \"http://localhost:3000\",\r\n  \"http://localhost:3001\",\r\n];\r\n\r\nfunction getAllowOrigin(origin: string | null) {\r\n  if (!origin) return \"\";\r\n  if (process.env.NODE_ENV === \"development\") {\r\n    console.log(\"üîß Dev mode - Allowing origin:\", origin);\r\n    return origin;\r\n  }\r\n  if (allowedOrigins.includes(origin)) {\r\n    console.log(\"‚úÖ Prod mode - Allowing origin:\", origin);\r\n    return origin;\r\n  }\r\n  console.log(\"‚ùå Origin not allowed:\", origin);\r\n  return \"\";\r\n}\r\n\r\nfunction withCORS(res: NextResponse, req: NextRequest) {\r\n  const origin = req.headers.get(\"origin\");\r\n  const allowOrigin = getAllowOrigin(origin);\r\n  if (allowOrigin) {\r\n    res.headers.set(\"Access-Control-Allow-Origin\", allowOrigin);\r\n    res.headers.set(\"Vary\", \"Origin\");\r\n  }\r\n  res.headers.set(\"Access-Control-Allow-Methods\", \"GET, POST, PUT, DELETE, OPTIONS\");\r\n  res.headers.set(\"Access-Control-Allow-Headers\", \"Content-Type, Authorization\");\r\n  return res;\r\n}\r\n\r\nexport async function POST(req: NextRequest) {\r\n  try {\r\n    const data = await req.formData();\r\n    const imageFile = data.get(\"image\") as File;\r\n    const pdfFile = data.get(\"pdf\") as File;\r\n\r\n    if (!imageFile || !pdfFile) {\r\n      console.log(\"‚ùå Missing image or pdf file\");\r\n      return withCORS(\r\n        NextResponse.json({ success: false, message: \"Both image and pdf files are required\" }, { status: 400 }),\r\n        req\r\n      );\r\n    }\r\n\r\n    // Validate file types\r\n    const validImageTypes = [\"image/jpeg\", \"image/png\", \"image/jpg\"];\r\n    if (!validImageTypes.includes(imageFile.type)) {\r\n      console.log(\"‚ùå Invalid image file type:\", imageFile.type);\r\n      return withCORS(\r\n        NextResponse.json({ success: false, message: \"Only JPEG or PNG images are allowed\" }, { status: 400 }),\r\n        req\r\n      );\r\n    }\r\n    if (pdfFile.type !== \"application/pdf\") {\r\n      console.log(\"‚ùå Invalid pdf file type:\", pdfFile.type);\r\n      return withCORS(\r\n        NextResponse.json({ success: false, message: \"Only PDF files are allowed\" }, { status: 400 }),\r\n        req\r\n      );\r\n    }\r\n\r\n    // Save image file\r\n    const imageBytes = await imageFile.arrayBuffer();\r\n    const imageBuffer = Buffer.from(imageBytes);\r\n    const imageFileName = `book-image-${Date.now()}.${imageFile.name.split(\".\").pop()}`;\r\n    const imageFilePath = join(process.cwd(), \"public/images\", imageFileName);\r\n    await writeFile(imageFilePath, imageBuffer);\r\n\r\n    // Save pdf file\r\n    const pdfBytes = await pdfFile.arrayBuffer();\r\n    const pdfBuffer = Buffer.from(pdfBytes);\r\n    const pdfFileName = `book-pdf-${Date.now()}.${pdfFile.name.split(\".\").pop()}`;\r\n    const pdfFilePath = join(process.cwd(), \"public/pdfs\", pdfFileName);\r\n    await writeFile(pdfFilePath, pdfBuffer);\r\n\r\n    console.log(\"‚úÖ Files uploaded:\", { image: imageFileName, pdf: pdfFileName });\r\n    return withCORS(\r\n      NextResponse.json({\r\n        success: true,\r\n        message: \"Files uploaded successfully\",\r\n        imageUrl: `/images/${imageFileName}`,\r\n        pdfUrl: `/pdfs/${pdfFileName}`,\r\n      }, { status: 201 }),\r\n      req\r\n    );\r\n  } catch (error) {\r\n    console.error(\"‚ùå Upload Error:\", error);\r\n    return withCORS(NextResponse.json({ success: false, message: \"Server error\" }, { status: 500 }), req);\r\n  }\r\n}\r\n\r\nexport async function OPTIONS(req: NextRequest) {\r\n  console.log(\"üîÑ CORS Preflight request for Upload Files\");\r\n  const res = new NextResponse(null, { status: 204 });\r\n  return withCORS(res, req);\r\n}\r\n\r\n// ‚úÖ DELETE handler\r\nexport async function DELETE(req: NextRequest) {\r\n  try {\r\n    console.log(\"üóëÔ∏è DELETE Admin Content request\")\r\n    await connectToDatabase()\r\n    const { searchParams } = new URL(req.url)\r\n    const id = searchParams.get(\"id\")\r\n    const contentType = searchParams.get(\"contentType\")\r\n    if (!id || !contentType) {\r\n      console.log(\"‚ùå Missing id or contentType for admin delete\")\r\n      const res = NextResponse.json({ message: \"Missing id or contentType\" }, { status: 400 })\r\n      return withCORS(res, req)\r\n    }\r\n\r\n    // üìö Handle Book Deletion (Admin Dashboard)\r\n    if (contentType === \"book\") {\r\n      console.log(\"üîç Deleting book with ID for admin:\", id)\r\n      const deletedBook = await Book.findByIdAndDelete(id)\r\n      if (!deletedBook) {\r\n        console.log(\"‚ùå Book not found for admin:\", id)\r\n        const res = NextResponse.json({ message: \"Book not found\" }, { status: 404 })\r\n        return withCORS(res, req)\r\n      }\r\n      console.log(\"‚úÖ Book deleted successfully by admin:\", id)\r\n      const res = NextResponse.json({ message: \"Book deleted successfully\" }, { status: 200 })\r\n      return withCORS(res, req)\r\n    }\r\n\r\n    // üì∑ Handle Promo Deletion (Admin Dashboard)\r\n    if (contentType === \"image\") {\r\n      console.log(\"üîç Deleting promo with ID for admin:\", id)\r\n      const deletedPromo = await Promo.findByIdAndDelete(id)\r\n      if (!deletedPromo) {\r\n        console.log(\"‚ùå Promo not found for admin:\", id)\r\n        const res = NextResponse.json({ message: \"Promo not found\" }, { status: 404 })\r\n        return withCORS(res, req)\r\n      }\r\n      console.log(\"‚úÖ Promo deleted successfully by admin:\", id)\r\n      const res = NextResponse.json({ message: \"Promo deleted successfully\" }, { status: 200 })\r\n      return withCORS(res, req)\r\n    }\r\n\r\n    // ‚ùå Invalid contentType\r\n    console.log(\"‚ùå Invalid contentType for admin:\", contentType)\r\n    const res = NextResponse.json({ message: \"Invalid contentType\" }, { status: 400 })\r\n    return withCORS(res, req)\r\n  } catch (error) {\r\n    console.error(\"‚ùå DELETE Admin Content Error:\", error)\r\n    const res = NextResponse.json({ message: \"Server Error\" }, { status: 500 })\r\n    return withCORS(res, req)\r\n  }\r\n}\r\n"],"names":[],"mappings":"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","debugId":null}}]
}